<Page x:Class="SnakeAndLaddersFinalProject.Pages.InventoryPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:language="clr-namespace:SnakeAndLaddersFinalProject.Properties.Langs"
      xmlns:controls="clr-namespace:SnakeAndLaddersFinalProject.Controls"
      mc:Ignorable="d"
      d:DesignWidth="400"
      d:DesignHeight="700"
      Title="InventoryPage">

    <Grid Margin="16"
          Background="#001A33">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- barra superior -->
            <RowDefinition Height="Auto" />
            <!-- título Items -->
            <RowDefinition Height="*" />
            <!-- grid Items -->
            <RowDefinition Height="Auto" />
            <!-- título Dados -->
            <RowDefinition Height="*" />
            <!-- grid Dados -->
            <RowDefinition Height="Auto" />
            <!-- Inventario Juicio label -->
            <RowDefinition Height="Auto" />
            <!-- slots items + dados -->
        </Grid.RowDefinitions>

        <!-- Barra superior con back -->
        <Border Grid.Row="0"
                BorderBrush="#F5F1C5"
                BorderThickness="2"
                Padding="8"
                Margin="0,0,0,12">
            <DockPanel>
                <Button Content="⟵"
                        Width="32"
                        Height="24"
                        Margin="0,0,8,0"
                        BorderThickness="0"
                        Background="Transparent"
                        Foreground="#F5F1C5"
                        FontSize="16"
                        Click="OnMainMenuClick" />
                <TextBlock Text="{x:Static language:Lang.btnInventoryText}"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#F5F1C5"
                           VerticalAlignment="Center" />
            </DockPanel>
        </Border>

        <!-- Título Items -->
        <TextBlock Grid.Row="1"
                   Text="Items"
                   Margin="4,0,0,8"
                   FontSize="18"
                   FontWeight="Bold"
                   Foreground="#F5F1C5" />

        <!-- Items: ícono + cantidad -->
        <Border Grid.Row="2"
                BorderBrush="#F5F1C5"
                BorderThickness="2"
                Padding="8">
            <ListBox x:Name="ItemsListView"
                     ItemsSource="{Binding Items}"
                     SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                     Background="Transparent"
                     BorderThickness="0"
                     HorizontalContentAlignment="Center">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="2" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="8"
                                    HorizontalAlignment="Center"
                                    ToolTip="{Binding Name}">
                            <Image Width="64"
                                   Height="64"
                                   Source="{Binding IconPath}"
                                   Stretch="Uniform" />
                            <TextBlock Text="{Binding Quantity, StringFormat=x{0}}"
                                       HorizontalAlignment="Center"
                                       Margin="0,4,0,0"
                                       Foreground="#F5F1C5"
                                       FontSize="14"
                                       FontWeight="Bold" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>

        <!-- Título Dados -->
        <TextBlock Grid.Row="3"
                   Text="Dados"
                   Margin="4,12,0,4"
                   FontSize="18"
                   FontWeight="Bold"
                   Foreground="#F5F1C5" />

        <!-- Dados: ícono + cantidad -->
        <Border Grid.Row="4"
                BorderBrush="#F5F1C5"
                BorderThickness="2"
                Padding="8">
            <ListBox x:Name="DiceListView"
                     ItemsSource="{Binding Dice}"
                     SelectedItem="{Binding SelectedDice, Mode=TwoWay}"
                     Background="Transparent"
                     BorderThickness="0"
                     HorizontalContentAlignment="Center">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="2" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="8"
                                    HorizontalAlignment="Center"
                                    ToolTip="{Binding Name}">
                            <Image Width="64"
                                   Height="64"
                                   Source="{Binding IconPath}"
                                   Stretch="Uniform" />
                            <TextBlock Text="{Binding Quantity, StringFormat=x{0}}"
                                       HorizontalAlignment="Center"
                                       Margin="0,4,0,0"
                                       Foreground="#F5F1C5"
                                       FontSize="14"
                                       FontWeight="Bold" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>

        <!-- Label Inventario Juicio -->
        <TextBlock Grid.Row="5"
                   Text="Inventario Juicio"
                   Margin="4,12,0,4"
                   FontSize="16"
                   FontWeight="Bold"
                   Foreground="#F5F1C5" />

        <!-- Slots items + dados -->
        <Border Grid.Row="6"
                BorderBrush="#F5F1C5"
                BorderThickness="2"
                Padding="6">
            <!-- Aquí usamos el UserControl de slots -->
            <controls:InventorySlotsControl HorizontalAlignment="Center" />
        </Border>
    </Grid>
</Page>
